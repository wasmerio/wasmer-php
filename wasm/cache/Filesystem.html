<!DOCTYPE html>

<html lang="en" prefix="og: http://ogp.me/ns#">
    <head>
        <base href="./../../" />
        <title>Wasm\Cache\Filesystem from php-ext-wasm</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta http-equiv="content-type" content="text/javascript; charset=utf-8" />
        <meta http-equiv="content-type" content="text/css; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="preload" href="./css/main.css" as="style" />
        <link rel="preload" href="./javascript/prism.js" as="script" />
        <link rel="preload" href="./javascript/prism-hooks.js" as="script" />
        <link rel="preload" href="./javascript/search.elm.js" as="script" />
        <link rel="preload" href="./javascript/search-index.js" as="script" />
        <link rel="preload" href="./javascript/search-metadata.js" as="script" />
        <link rel="preload" href="./javascript/application.js" as="script" />

        <link rel="stylesheet" href="./css/main.css" media="all" />
        <link rel="stylesheet" href="./css/prism.css" media="all" />

        <link rel="icon" type="image/png" href="./resource/logo_32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="./resource/logo_192x192.png" sizes="192x192" />

        <meta name="generator" content="Kitab (https://hoa-project.net/)" />
        <meta name="description" content="Wasm\Cache\Filesystem from php-ext-wasm">

        <meta property="og:title" content="Wasm\Cache\Filesystem from php-ext-wasm" />
        <meta property="og:type" content="website" />
        <meta proprery="og:image" content="https://github.com/wasmerio.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:creator" content="@hoaproject" />
        <meta name="twitter:text:title" content="Wasm\Cache\Filesystem from php-ext-wasm" />
        <meta name="twitter:image:src" content="https://github.com/wasmerio.png" />
        <meta name="twitter:image:alt" content="php-ext-wasm" />
    </head>
    <body>
        <div id="search" role="search">
            <div>
                <input type="search" placeholder="Initializing search…" disabled />
            </div>
        </div>

        <main>
            <aside>
    <header>
        <a href="./">
            <img src="https://github.com/wasmerio.png" alt="Home" />
        </a>
    </header>

    <nav>
        <h1><code><a href="./wasm/index.html">Wasm</a>\<wbr /><a href="./wasm/cache/index.html">Cache</a></code></h1>

                    <h2>Classes</h2>

            <ul class="list--flat">
                                    <li><a href="./wasm/cache/Filesystem.html"><code>Filesystem</code></a></li>
                                    <li><a href="./wasm/cache/InvalidArgumentException.html"><code>InvalidArgumentException</code></a></li>
                                    <li><a href="./wasm/cache/Exception.html"><code>Exception</code></a></li>
                            </ul>
        
                    <h2>Interfaces</h2>

            <ul class="list--flat">
                                    <li><a href="./wasm/cache/CacheInterface.html"><code>CacheInterface</code></a></li>
                            </ul>
        
        
            </nav>
</aside>

<article>
    <h1>
    Class <code>Wasm\Cache\Filesystem</code>
    <aside>
        <a href="./wasm/cache/Filesystem.source.html#L.36-186" title="View source">[src]</a>
    </aside>
</h1>

<pre><code class="language-php">class Filesystem
{
    public function __construct(string $cacheDirectory);
    public function get($key, $default);
    public function set($key, $value, $ttl);
    public function delete($key);
    public function clear();
    public function getMultiple($keys, $default);
    public function setMultiple($values, $ttl);
    public function deleteMultiple($keys);
    public function has($key);
    private function getCacheFile(string $key);
}</code></pre>

<section class="entity__description"><p>An on-disk cache implementation.</p>
<h1>Examples</h1>
<pre><code class="language-php,ignore">const KEY = 'foobar';
const CACHE_DIRECTORY = '/tmp/php.wasm.cache/';

$cache = new Wasm\Cache\Filesystem(CACHE_DIRECTORY);

// The cache exists. Let's fetch the module.
if ($cache-&gt;has(KEY)) {
    $module = $cache-&gt;get(KEY);
}
// The cache doesn't exist. Let's compile and store the module.
else {
    $module = new Wasm\Module('my_program.wasm');
    $cache-&gt;set(KEY, $module);
}

// Let's continue as usual: Instantiate the module, and invoke functions on it.
$instance = $module-&gt;instantiate();
$instance-&gt;sum(1, 2);
</code></pre>
</section>

    <h2 id="constants">Constants</h2>

    <dl class="entity__children">
                    <dt aria-label="CACHE_SUFFIX"><code class="language-php">public const CACHE_SUFFIX = '.module.wasm.cache'</code></dt>
            <dd>
                <section><p>Represents the cache file extension.</p>
</section>
            </dd>
            </dl>

    <h2 id="attributes">Attributes</h2>

    <dl class="entity__children">
                    <dt aria-label="cacheDirectory"><code class="language-php">private $cacheDirectory</code></dt>
            <dd>
                <section><p>The cache directory where cache files are located.</p>
</section>
            </dd>
            </dl>

    <h2 id="methods">Methods</h2>

    <dl class="entity__children">
                    <dt aria-label="__construct">
                <code class="language-php">public function __construct(string $cacheDirectory)</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.54-71" title="View source of the `__construct` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Builds a cache in a specific directory.</p>
<p>A <a href="./wasm/cache/Exception.html"><code>Wasm\Cache\Exception</code></a> is thrown if the cache directory is not a
valid directory, nor readable, nor writable.</p>
</section>
            </dd>
                    <dt aria-label="get">
                <code class="language-php">public function get($key, $default)</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.77-96" title="View source of the `get` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Gets a module from the cache based on its key if it exists and is
valid, the default value otherwise.</p>
</section>
            </dd>
                    <dt aria-label="set">
                <code class="language-php">public function set($key, $value, $ttl)</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.103-112" title="View source of the `set` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Sets a module object into the cached.</p>
<p>The TTL is not taken into account yet.</p>
</section>
            </dd>
                    <dt aria-label="delete">
                <code class="language-php">public function delete($key)</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.117-124" title="View source of the `delete` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Deletes a module from the cache based on its key.</p>
</section>
            </dd>
                    <dt aria-label="clear">
                <code class="language-php">public function clear()</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.129-145" title="View source of the `clear` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Clears the cache, i.e. remove all cache files.</p>
</section>
            </dd>
                    <dt aria-label="getMultiple">
                <code class="language-php">public function getMultiple($keys, $default)</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.150-153" title="View source of the `getMultiple` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Not implemented yet.</p>
</section>
            </dd>
                    <dt aria-label="setMultiple">
                <code class="language-php">public function setMultiple($values, $ttl)</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.158-161" title="View source of the `setMultiple` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Not implemented yet.</p>
</section>
            </dd>
                    <dt aria-label="deleteMultiple">
                <code class="language-php">public function deleteMultiple($keys)</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.166-169" title="View source of the `deleteMultiple` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Not implemented yet.</p>
</section>
            </dd>
                    <dt aria-label="has">
                <code class="language-php">public function has($key)</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.174-177" title="View source of the `has` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Checks whether a cache item exists for a given key.</p>
</section>
            </dd>
                    <dt aria-label="getCacheFile">
                <code class="language-php">private function getCacheFile(string $key)</code>
                <aside><a href="./wasm/cache/Filesystem.source.html#L.182-185" title="View source of the `getCacheFile` method">[src]</a></aside>
            </dt>
            <dd>
                <section><p>Gets a cache file name based on a key, whether it exists or not.</p>
</section>
            </dd>
            </dl>

    <h2 id="interfaces">Interfaces</h2>

    <dl class="entity__children list--flat">
                    <dt><code class="language-php">interface Wasm\Cache\CacheInterface</code></dt>
            <dd>…</dd>
            </dl>
</article>
        </main>

        <script src="./javascript/prism.js"></script>
        <script src="./javascript/prism-hooks.js"></script>
        <script src="./javascript/search.elm.js" defer></script>
        <script src="./javascript/search-index.js" defer></script>
        <script src="./javascript/search-metadata.js" defer></script>
        <script src="./javascript/application.js" defer></script>
    </body>
</html>
